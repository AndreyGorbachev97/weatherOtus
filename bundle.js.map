{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://weatherotus/./src/renderCity.js","webpack://weatherotus/./src/loading.js","webpack://weatherotus/./src/constants.js","webpack://weatherotus/./src/getWeatherByCoord.js","webpack://weatherotus/./src/renderCitiesBtn.js","webpack://weatherotus/./src/getCityCoord.js","webpack://weatherotus/./src/getLocation.js","webpack://weatherotus/./src/initWeather.js","webpack://weatherotus/./src/index.js"],"sourcesContent":["export const renderCity = async (city) => {\n  console.log(\"city\", city)\n  const temp = city.main.temp - 273.15;\n  const cityName = city.name;\n  const iconId = city.weather[0].icon;\n  const desc = city.weather[0].description;\n  const container = document.querySelector(\".current-city\")\n  container.innerHTML = \"\"\n\n  const info = document.createElement(\"div\")\n  info.classList = \"info-wether\"\n  const pCityName = document.createElement(\"div\")\n  const bTemp = document.createElement(\"h2\")\n  const pTemp = document.createElement(\"div\")\n  const icon = document.createElement(\"img\")\n  icon.className = \"img\"\n  const pDesc = document.createElement(\"div\")\n\n  icon.src = `https://openweathermap.org/img/w/${iconId}.png`\n  pCityName.innerText = `${cityName}`\n  bTemp.innerText = temp.toFixed(2)\n  pTemp.innerText = `Температура воздуха составляет ${temp.toFixed(2)} градус(ов)`\n  pDesc.innerText = desc\n\n  info.append(bTemp)\n  info.append(pCityName)\n  info.append(pTemp)\n  info.append(pDesc)\n  container.append(icon)\n  container.append(info)\n\n}","export const loading = () => {\n  const container = document.querySelector(\".current-city\")\n  if (container) {\n    container.innerHTML = \"\"\n    const load = document.createElement(\"div\");\n    load.className = \"loading\"\n    load.innerText = \"Загрузка данных...\"\n    container.append(load)\n  }\n\n}","export const apiKey = \"e991634bb051c413efd0e2fe2c8ddff5\"","import { apiKey } from \"./constants\"\n\nexport const getWeatherByCoord = async (lat, lon) => {\n  try {\n    const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&lang=RU&appid=${apiKey}`)\n    const data = await res.json();\n    if (data.cod !== 200) throw new Error(data.message)\n    return data\n  } catch (e) {\n    alert(\"Ошибка HTTP: \" + e);\n  }\n}","import { getCityCoord } from \"./getCityCoord\";\n\nexport const renderCitiesBtn = () => {\n  const container = document.querySelector(\".history-cities\")\n  container.innerHTML = \"\"\n  const store = localStorage.getItem(\"cities\");\n  if (store) {\n    const cities = JSON.parse(store)\n    cities.forEach(item => {\n      const cityElement = document.createElement(\"div\")\n      cityElement.className = \"tag\"\n      cityElement.innerHTML = item\n      cityElement.addEventListener(\"click\", () => getCityCoord(item))\n      container.append(cityElement)\n    })\n  }\n}","import { apiKey } from \"./constants\";\nimport { getWeatherByCoord } from \"./getWeatherByCoord\";\nimport { loading } from \"./loading\";\nimport { renderCitiesBtn } from \"./renderCitiesBtn\";\nimport { renderCity } from \"./renderCity\"\n\nexport const getCityCoord = async (city) => {\n  try {\n    loading()\n    const res = await fetch(`http://api.openweathermap.org/geo/1.0/direct?q=${city}&limit=5&appid=${apiKey}`)\n    const data = await res.json();\n    const store = localStorage.getItem(\"cities\");\n\n    if (store) {\n      let cities = JSON.parse(store)\n      if (cities.length >= 10) {\n        cities = cities.slice(0, 9)\n      }\n      localStorage.setItem(\"cities\", JSON.stringify([city, ...cities]))\n      renderCitiesBtn()\n    } else {\n      localStorage.setItem(\"cities\", JSON.stringify([city]))\n      renderCitiesBtn()\n    }\n\n    if (data[0]) {\n      let { lat, lon } = data[0]\n      const city = await getWeatherByCoord(lat, lon)\n      renderCity(city)\n    }\n\n  } catch (e) {\n    console.error(e);\n  }\n}","import { initWeather } from \"./initWeather\"\n\nexport function getLocation() {\n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(initWeather);\n  } else {\n    alert(\"Браузер не поддерживает геолокацию.\")\n  }\n}","import { renderCity } from \"./renderCity\";\nimport { loading } from \"./loading\";\nimport { getWeatherByCoord } from \"./getWeatherByCoord\"\n\nexport function initWeather(position) {\n  loading()\n  getWeatherByCoord(position.coords.latitude, position.coords.longitude)\n    .then((res) => renderCity(res))\n} ","import \"../css/style.css\";\nimport { getLocation } from \"./getLocation\";\nimport { getCityCoord } from \"./getCityCoord\"\nimport { renderCitiesBtn } from \"./renderCitiesBtn\"\n\n// Получение геопозиции при входе и отрисовка данных\ngetLocation()\n\n// Вешаем событие на инпут\nconst input = document.querySelector(\".input\")\ninput?.addEventListener(\"change\", (event) => getCityCoord(event.target.value))\n\nrenderCitiesBtn()\n\n\nexport const sum = (a, b) => a + b"],"names":["renderCity","city","console","log","temp","main","cityName","name","iconId","weather","icon","desc","description","container","document","querySelector","innerHTML","info","createElement","classList","pCityName","bTemp","pTemp","className","pDesc","src","innerText","toFixed","append","loading","load","apiKey","getWeatherByCoord","lat","lon","fetch","res","json","data","cod","Error","message","alert","renderCitiesBtn","store","localStorage","getItem","JSON","parse","forEach","item","cityElement","addEventListener","getCityCoord","i","cities","length","slice","setItem","stringify","error","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","then","input","event","target","value"],"sourceRoot":""}