{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://weatherotus/./src/renderCity.js","webpack://weatherotus/./src/loading.js","webpack://weatherotus/./node_modules/ymaps/dist/ymaps.esm.js","webpack://weatherotus/./src/map.js","webpack://weatherotus/./src/getWeatherByCoord.js","webpack://weatherotus/./src/constants.js","webpack://weatherotus/./src/initWeather.js","webpack://weatherotus/./src/renderCitiesBtn.js","webpack://weatherotus/./src/getCityCoord.js","webpack://weatherotus/./src/index.js","webpack://weatherotus/./src/renderUI.js","webpack://weatherotus/./src/getLocation.js"],"sourcesContent":["export const renderCity = async (city, el) => {\n  console.log(\"city\", city)\n  const temp = city.main.temp - 273.15;\n  const cityName = city.name;\n  const iconId = city.weather[0].icon;\n  const desc = city.weather[0].description;\n  const container = el.querySelector(\".current-city\")\n  container.innerHTML = \"\"\n\n  const info = document.createElement(\"div\")\n  info.classList = \"info-wether\"\n  const pCityName = document.createElement(\"div\")\n  const bTemp = document.createElement(\"h2\")\n  const pTemp = document.createElement(\"div\")\n  const icon = document.createElement(\"img\")\n  icon.className = \"img\"\n  const pDesc = document.createElement(\"div\")\n\n  icon.src = `https://openweathermap.org/img/w/${iconId}.png`\n  pCityName.innerText = `${cityName}`\n  bTemp.innerText = temp.toFixed(2) > 0 ? `+ ${temp.toFixed(2)}` : temp.toFixed(2)\n  pTemp.innerText = `Температура воздуха составляет ${temp.toFixed(2)} градус(ов)`\n  pDesc.innerText = desc\n\n\n  info.append(bTemp)\n  info.append(pCityName)\n  info.append(pTemp)\n  info.append(pDesc)\n  container.append(icon)\n  container.append(info)\n\n}","export const loading = (el) => {\n  const container = el.querySelector(\".current-city\")\n  if (container) {\n    container.innerHTML = \"\"\n    const load = document.createElement(\"div\");\n    load.className = \"loading\"\n    load.innerText = \"Загрузка данных...\"\n    container.append(load)\n  }\n}","var ymaps$1 = {\n  load: function load() {\n    var src = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '//api-maps.yandex.ru/2.1/?lang=en_RU';\n\n    var getNsParamValue = function getNsParamValue() {\n      var results = src.match(/[\\\\?&]ns=([^&#]*)/);\n      return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n    };\n\n    if (!this.promise) {\n      this.promise = new Promise(function (resolve, reject) {\n        var scriptElement = document.createElement('script');\n        scriptElement.onload = resolve;\n        scriptElement.onerror = reject;\n        scriptElement.type = 'text/javascript';\n        scriptElement.src = src;\n        document.body.appendChild(scriptElement);\n      }).then(function () {\n        var ns = getNsParamValue();\n\n        if (ns && ns !== 'ymaps') {\n          (0, eval)(\"var ymaps = \".concat(ns, \";\"));\n        }\n\n        return new Promise(function (resolve) {\n          return ymaps.ready(resolve);\n        });\n      });\n    }\n\n    return this.promise;\n  }\n};\n\nexport default ymaps$1;\n","import ymaps from 'ymaps';\n\nlet center = [48.8866527839977, 2.34310679732974];\n\nexport const renderMap = (center) => {\n  ymaps\n    .load('https://api-maps.yandex.ru/2.1/?lang=ru_RU')\n    .then(maps => {\n      const map = new maps.Map('map', {\n        center: center,\n        zoom: 13,\n        Placemark: center\n      });\n    })\n    .catch(error => console.log('Failed to load Yandex Maps', error));\n};","import { renderMap } from \"./map\";\n\nexport const getWeatherByCoord = async (lat, lon, el, apiKey) => {\n  try {\n    const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&lang=RU&appid=${apiKey}`)\n    const data = await res.json();\n    console.log(\"data\", data)\n    if (data.cod !== 200) throw new Error(data.message)\n    const map = el.querySelector(\"#map\")\n    map.innerHTML = \"\"\n    renderMap([lat, lon])\n    return data\n  } catch (e) {\n    console.error(\"Ошибка HTTP: \" + e);\n  }\n}","export const apiKey = \"e991634bb051c413efd0e2fe2c8ddff5\"","import { renderCity } from \"./renderCity\";\nimport { loading } from \"./loading\";\nimport { getWeatherByCoord } from \"./getWeatherByCoord\"\nimport { apiKey } from \"./constants\"\n\nconst body = document.querySelector(\"body\")\n\nexport function initWeather(position) {\n  loading(body)\n  console.log(\"position11\", position)\n  getWeatherByCoord(position.coords.latitude, position.coords.longitude, body, apiKey)\n    .then((res) => renderCity(res, body))\n} ","import { getCityCoord } from \"./getCityCoord\";\n\nexport const renderCitiesBtn = (el) => {\n  const container = el.querySelector(\".history-cities\")\n  container.innerHTML = \"\"\n  const store = localStorage.getItem(\"cities\");\n  if (store) {\n    const cities = JSON.parse(store)\n    cities.forEach(item => {\n      const cityElement = document.createElement(\"div\")\n      cityElement.className = \"tag\"\n      cityElement.innerHTML = item\n      cityElement.addEventListener(\"click\", () => getCityCoord(item))\n      container.append(cityElement)\n    })\n  }\n}","import { apiKey } from \"./constants\";\nimport { getWeatherByCoord } from \"./getWeatherByCoord\";\nimport { loading } from \"./loading\";\nimport { renderCitiesBtn } from \"./renderCitiesBtn\";\nimport { renderCity } from \"./renderCity\"\n\nexport const getCityCoord = async (city, el) => {\n  try {\n    loading(el)\n    const res = await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${city}&limit=5&appid=${apiKey}`)\n    const data = await res.json();\n    const store = localStorage.getItem(\"cities\");\n\n    if (store) {\n      let cities = JSON.parse(store)\n      if (cities.length >= 10) {\n        cities = cities.slice(0, 9)\n      }\n      localStorage.setItem(\"cities\", JSON.stringify([city, ...cities]))\n      renderCitiesBtn(el)\n    } else {\n      localStorage.setItem(\"cities\", JSON.stringify([city]))\n      renderCitiesBtn(el)\n    }\n\n    if (data[0]) {\n      let { lat, lon } = data[0]\n      const city = await getWeatherByCoord(lat, lon, el, apiKey)\n      renderCity(city, el)\n    }\n\n  } catch (e) {\n    console.error(e);\n  }\n}","import \"../css/style.css\";\nimport { getLocation } from \"./getLocation\";\nimport { getCityCoord } from \"./getCityCoord\";\nimport { renderCitiesBtn } from \"./renderCitiesBtn\";\nimport { renderUI } from \"./renderUI\";\n\n\n// Рендер начального HTML\nconst body = document.querySelector(\"body\")\nrenderUI(body)\n\n// Получение геопозиции при входе и отрисовка данных\ngetLocation(body)\n\n// Вешаем событие на инпут\nconst input = body.querySelector(\".input\")\ninput?.addEventListener(\"change\", (event) => getCityCoord(event.target.value, body))\n\nrenderCitiesBtn()\n\nexport const sum = (a, b) => a + b","export const renderUI = (el) => {\n  el.innerHTML = `\n    <div class=\"container\">\n      <h1>MeteoOtus</h1>\n      <input placeholder=\"Введите название города\" class=\"input\" />\n      <div class=\"current-city\"></div>\n      <h2 class=\"label\">История запросов погоды</h2>\n      <div class=\"history-cities\"></div>\n      <div id=\"map\" class=\"map\"></div>\n    </div>\n  `;\n}","import { initWeather } from \"./initWeather\"\n\nexport function getLocation() {\n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(initWeather);\n  } else {\n    alert(\"Браузер не поддерживает геолокацию.\")\n  }\n}"],"names":["renderCity","city","el","console","log","temp","main","cityName","name","iconId","weather","icon","desc","description","container","querySelector","innerHTML","info","document","createElement","classList","pCityName","bTemp","pTemp","className","pDesc","src","innerText","toFixed","append","loading","load","ymaps$1","arguments","length","undefined","getNsParamValue","results","match","decodeURIComponent","replace","this","promise","Promise","resolve","reject","scriptElement","onload","onerror","type","body","appendChild","then","ns","eval","concat","ymaps","ready","renderMap","center","maps","Map","zoom","Placemark","error","getWeatherByCoord","lat","lon","apiKey","fetch","res","json","data","cod","Error","message","renderCitiesBtn","store","localStorage","getItem","JSON","parse","forEach","item","cityElement","addEventListener","getCityCoord","i","cities","slice","setItem","stringify","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","alert","input","event","target","value"],"sourceRoot":""}